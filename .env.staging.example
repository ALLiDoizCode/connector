# =============================================================================
# M2M Connector Staging Configuration (Public Testnets)
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control!
#
# This configuration targets public testnets:
#   - Base Sepolia (EVM) - Chain ID 84532
#   - XRPL Testnet (XRP) - s.altnet.rippletest.net
#
# Prerequisites:
#   1. Fund your EVM wallet with Base Sepolia ETH:
#      https://www.alchemy.com/faucets/base-sepolia
#      https://www.coinbase.com/faucets/base-ethereum-sepolia-faucet
#   2. Fund your XRP wallet with XRPL Testnet XRP:
#      https://faucet.altnet.rippletest.net/
#   3. Deploy or use existing TokenNetworkRegistry on Base Sepolia
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED: Environment (must be 'staging' for testnet deployment)
# -----------------------------------------------------------------------------
ENVIRONMENT=staging

# -----------------------------------------------------------------------------
# REQUIRED: Core Configuration
# -----------------------------------------------------------------------------

# Unique identifier for this connector node
NODE_ID=my-connector-testnet

# Settlement preference: 'evm' | 'xrp' | 'both'
SETTLEMENT_PREFERENCE=both

# Log level: 'debug' | 'info' | 'warn' | 'error'
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# REQUIRED: Blockchain Configuration
# -----------------------------------------------------------------------------

# --- Base Sepolia (EVM) ---
BASE_ENABLED=true
BASE_RPC_URL=https://sepolia.base.org
BASE_CHAIN_ID=84532

# TokenNetworkRegistry contract address on Base Sepolia
# Deployed 2026-01-27 by 0x1BdF7EA7EB7699400a4842277866A5B4Ae90726d
BASE_REGISTRY_ADDRESS=0xCbf6f43A17034e733744cBCc130FfcCA3CF3252C

# --- Aptos Testnet ---
APTOS_ENABLED=true
APTOS_NODE_URL=https://fullnode.testnet.aptoslabs.com/v1
APTOS_FAUCET_URL=https://faucet.testnet.aptoslabs.com

# Payment Channel Module address on Aptos Testnet
# Deployed 2026-01-31 by 0xb206e544e69642e894f4eb4d2ba8b6e2b26bf1fd4b5a76cfc0d73c55ca725b6a
APTOS_PAYMENT_CHANNEL_MODULE=0xb206e544e69642e894f4eb4d2ba8b6e2b26bf1fd4b5a76cfc0d73c55ca725b6a::channel

# --- XRPL Testnet ---
XRPL_ENABLED=true
XRPL_RPC_URL=https://s.altnet.rippletest.net:51234
XRPL_NETWORK=testnet

# Alternative XRPL Testnet endpoints:
# XRPL_RPC_URL=wss://s.altnet.rippletest.net:51233  (WebSocket)

# -----------------------------------------------------------------------------
# REQUIRED: Wallet Addresses
# -----------------------------------------------------------------------------

# EVM wallet address (0x-prefixed, funded with Base Sepolia ETH)
EVM_ADDRESS=

# XRP wallet address (r-prefixed, funded with XRPL Testnet XRP)
XRP_ADDRESS=

# -----------------------------------------------------------------------------
# REQUIRED: Key Management
# -----------------------------------------------------------------------------

# Key management backend: 'env' for testnet is acceptable
# For shared staging environments, consider 'aws-kms' | 'gcp-kms' | 'azure-kv'
KEY_BACKEND=env

# For KEY_BACKEND=env:
# EVM private key (hex format with 0x prefix)
EVM_PRIVATE_KEY=
# XRP seed (XRPL seed format starting with 's')
XRP_SEED=

# -----------------------------------------------------------------------------
# OPTIONAL: Network Configuration
# -----------------------------------------------------------------------------

# BTP server port (default: 4000)
BTP_PORT=4000

# Health check and metrics HTTP port (default: 8080)
HEALTH_CHECK_PORT=8080

# -----------------------------------------------------------------------------
# OPTIONAL: TigerBeetle Configuration
# -----------------------------------------------------------------------------

# TigerBeetle cluster ID (default: 0)
TIGERBEETLE_CLUSTER_ID=0

# TigerBeetle replica addresses (default: tigerbeetle:3000 for Docker)
TIGERBEETLE_REPLICAS=tigerbeetle:3000

# TigerBeetle operation timeout in ms (default: 15000)
TIGERBEETLE_OPERATION_TIMEOUT=15000

# -----------------------------------------------------------------------------
# OPTIONAL: Operational Timeouts
# -----------------------------------------------------------------------------

# BTP send timeout in ms (default: 10000, increase for multi-hop)
BTP_SEND_TIMEOUT_MS=10000

# BTP packet timeout for agent-runtime middleware (default: 10000)
CONNECTOR_BTP_PACKET_TIMEOUT_MS=10000

# Settlement monitor polling interval in ms (default: 30000)
SETTLEMENT_POLLING_INTERVAL=30000

# Channel deposit multiplier (default: 1 = 1 M2M token per channel)
INITIAL_DEPOSIT_MULTIPLIER=1

# -----------------------------------------------------------------------------
# OPTIONAL: Monitoring Configuration
# -----------------------------------------------------------------------------

# Enable Prometheus metrics (default: true)
PROMETHEUS_ENABLED=true

# Grafana admin password
GRAFANA_PASSWORD=admin

# -----------------------------------------------------------------------------
# OPTIONAL: BTP Peer Authentication
# -----------------------------------------------------------------------------
# Pattern: BTP_PEER_<PEER_ID_UPPERCASE>_SECRET=<secret_value>
# Generate secrets: openssl rand -base64 32
# BTP_PEER_ALICE_SECRET=
# BTP_PEER_BOB_SECRET=
