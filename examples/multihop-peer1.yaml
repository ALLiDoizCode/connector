# Multi-Hop Topology: Peer 1 (Entry Node)
# Topology: Peer1 → Peer2 → Peer3 → Peer4 → Peer5
#
# This is the entry peer that receives external packets.
# Peer1 only accepts incoming BTP connections - it does not initiate outgoing connections.
#
# Network Flow:
# - Packets destined for g.peer{2,3,4,5} are routed through peer2
# - Peer2 initiates the BTP connection to Peer1

# Node Identity
nodeId: peer1
ilpAddress: g.peer1
btpServerPort: 3000
explorerPort: 5173
logLevel: info

# Optional Configuration
healthCheckPort: 8080

# Peer Connections
# Peer1 connects to Peer2 for bidirectional packet forwarding
peers:
  - id: peer2
    url: ws://peer2:3001
    authToken: secret-peer1-to-peer2

# Routing Table
# All downstream traffic is sent to peer2
routes:
  # Local delivery for g.peer1 destinations
  - prefix: g.peer1
    nextHop: peer1
    priority: 0

  # Route to peer2 (directly connected)
  - prefix: g.peer2
    nextHop: peer2
    priority: 0

  # Route to peer3 (via peer2)
  - prefix: g.peer3
    nextHop: peer2
    priority: 0

  # Route to peer4 (via peer2)
  - prefix: g.peer4
    nextHop: peer2
    priority: 0

  # Route to peer5 (via peer2)
  - prefix: g.peer5
    nextHop: peer2
    priority: 0

# Settlement Configuration (Payment Channels)
# Peer1 uses EVM only (Base Sepolia) for Peer2 connection
settlement:
  connectorFeePercentage: 0.1
  enableSettlement: true
  settlementThreshold: 1000000
  initialDepositMultiplier: 10

  # TigerBeetle Configuration
  tigerBeetleClusterId: 0
  tigerBeetleReplicas:
    - tigerbeetle-5peer:3000

# Settlement preference: EVM only
settlementPreference: evm
