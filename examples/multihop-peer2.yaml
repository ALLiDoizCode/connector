# Multi-Hop Topology: Peer 2 (Transit Node 1)
# Topology: Peer1 ← Peer2 → Peer3 → Peer4 → Peer5
#
# This is the first transit node in the multi-hop chain.
# Peer2 connects to both Peer1 (upstream) and Peer3 (downstream).
#
# Network Flow:
# - Receives packets from Peer1 and Peer3
# - Forwards packets destined for Peer1 upstream
# - Forwards packets destined for Peer3/4/5 downstream

# Node Identity
nodeId: peer2
ilpAddress: g.peer2
btpServerPort: 3001
logLevel: info

# Optional Configuration
healthCheckPort: 8080

# Peer Connections
# Peer2 initiates BTP connections to both Peer1 (upstream) and Peer3 (downstream)
peers:
  - id: peer1
    url: ws://peer1:3000
    authToken: secret-peer1-to-peer2

  - id: peer3
    url: ws://peer3:3002
    authToken: secret-peer2-to-peer3

# Routing Table
# Route traffic upstream to Peer1, downstream to Peer3/4/5
routes:
  # Route to peer1 (upstream)
  - prefix: g.peer1
    nextHop: peer1
    priority: 0

  # Local delivery for g.peer2 destinations
  - prefix: g.peer2
    nextHop: peer2
    priority: 0

  # Route to peer3 (downstream)
  - prefix: g.peer3
    nextHop: peer3
    priority: 0

  # Route to peer4 (via peer3)
  - prefix: g.peer4
    nextHop: peer3
    priority: 0

  # Route to peer5 (via peer3)
  - prefix: g.peer5
    nextHop: peer3
    priority: 0
