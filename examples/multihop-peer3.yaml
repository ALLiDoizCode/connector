# Multi-Hop Topology: Peer 3 (Transit Node 2 - Middle)
# Topology: Peer1 ← Peer2 ← Peer3 → Peer4 → Peer5
#
# This is the middle transit node in the multi-hop chain.
# Peer3 connects to both Peer2 (upstream) and Peer4 (downstream).
#
# Network Flow:
# - Receives packets from Peer2 and Peer4
# - Forwards packets destined for Peer1/2 upstream to Peer2
# - Forwards packets destined for Peer4/5 downstream to Peer4

# Node Identity
nodeId: peer3
ilpAddress: g.peer3
btpServerPort: 3002
explorerPort: 5175
logLevel: info

# Optional Configuration
healthCheckPort: 8080

# Peer Connections
# Peer3 initiates BTP connections to both Peer2 (upstream) and Peer4 (downstream)
peers:
  - id: peer2
    url: ws://peer2:3001
    authToken: secret-peer2-to-peer3

  - id: peer4
    url: ws://peer4:3003
    authToken: secret-peer3-to-peer4

# Routing Table
# Route traffic upstream to Peer1/2, downstream to Peer4/5
routes:
  # Route to peer1 (via peer2)
  - prefix: g.peer1
    nextHop: peer2
    priority: 0

  # Route to peer2 (upstream)
  - prefix: g.peer2
    nextHop: peer2
    priority: 0

  # Local delivery for g.peer3 destinations
  - prefix: g.peer3
    nextHop: peer3
    priority: 0

  # Route to peer4 (downstream)
  - prefix: g.peer4
    nextHop: peer4
    priority: 0

  # Route to peer5 (via peer4)
  - prefix: g.peer5
    nextHop: peer4
    priority: 0

# Settlement Configuration (Payment Channels)
# Peer3 uses both XRP (for Peer2) and Aptos (for Peer4)
settlement:
  connectorFeePercentage: 0.1
  enableSettlement: true
  settlementThreshold: 1000000
  initialDepositMultiplier: 10

  # TigerBeetle Configuration
  tigerBeetleClusterId: 0
  tigerBeetleReplicas:
    - tigerbeetle-5peer:3000

# Settlement preference: 'both' to support XRP and Aptos
settlementPreference: both
