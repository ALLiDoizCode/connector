# Multi-Hop Topology: Peer 5 (Exit Node - Destination)
# Topology: Peer1 ← Peer2 ← Peer3 ← Peer4 ← Peer5
#
# This is the exit node and final destination in the multi-hop chain.
# Peer5 only connects to Peer4 (upstream) - it has no downstream peers.
#
# Network Flow:
# - Receives packets from Peer4
# - Delivers packets destined for g.peer5 locally
# - Routes packets destined for Peer1/2/3/4 upstream to Peer4

# Node Identity
nodeId: peer5
ilpAddress: g.peer5
btpServerPort: 3004
explorerPort: 5177
logLevel: info

# Optional Configuration
healthCheckPort: 8080

# Peer Connections
# Peer5 only initiates BTP connection to Peer4 (upstream)
peers:
  - id: peer4
    url: ws://peer4:3003
    authToken: secret-peer4-to-peer5

# Routing Table
# All upstream traffic is sent to peer4
routes:
  # Route to peer1 (via peer4)
  - prefix: g.peer1
    nextHop: peer4
    priority: 0

  # Route to peer2 (via peer4)
  - prefix: g.peer2
    nextHop: peer4
    priority: 0

  # Route to peer3 (via peer4)
  - prefix: g.peer3
    nextHop: peer4
    priority: 0

  # Route to peer4 (upstream)
  - prefix: g.peer4
    nextHop: peer4
    priority: 0

  # Local delivery for g.peer5 destinations
  - prefix: g.peer5
    nextHop: peer5
    priority: 0

# Settlement Configuration (Payment Channels)
# Peer5 uses EVM only (Base Sepolia) for Peer4 connection
settlement:
  connectorFeePercentage: 0.1
  enableSettlement: true
  settlementThreshold: 1000000
  initialDepositMultiplier: 10

  # TigerBeetle Configuration
  tigerBeetleClusterId: 0
  tigerBeetleReplicas:
    - tigerbeetle-5peer:3000

# Settlement preference: EVM only
settlementPreference: evm
