# Development environment variables for M2M project
# Copy this file to .env.dev to use these defaults
# Override values locally without committing changes
#
# Environment Variable Precedence:
# 1. Shell environment variables (highest priority)
# 2. .env.dev file values
# 3. Docker Compose file defaults (e.g., ${VAR:-default})

# ===== Base L2 Fork Configuration =====

# Base Sepolia RPC endpoint for forking blockchain state
# Default: Public Base Sepolia RPC (may have rate limits)
BASE_SEPOLIA_RPC_URL=https://sepolia.base.org

# Pinned block number for consistent state across developer machines
# Update this block number periodically to get newer testnet state
# Current block: 20702367 (update every 1-2 weeks for recent state)
FORK_BLOCK_NUMBER=20702367

# Alternative RPC endpoints (avoid rate limits):
# Uncomment and configure one of these if sepolia.base.org has rate limits or downtime
#
# Alchemy (requires free API key from https://www.alchemy.com/)
# BASE_SEPOLIA_RPC_URL=https://base-sepolia.g.alchemy.com/v2/YOUR_API_KEY
#
# Tenderly (free tier available at https://tenderly.co/)
# BASE_SEPOLIA_RPC_URL=https://base-sepolia.gateway.tenderly.co
#
# Infura (requires free project ID from https://infura.io/)
# BASE_SEPOLIA_RPC_URL=https://base-sepolia.infura.io/v3/YOUR_PROJECT_ID

# How to get latest Base Sepolia block number:
# Run this command to fetch the current block from the RPC endpoint:
#   curl https://sepolia.base.org -X POST -H 'Content-Type: application/json' \
#     --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}'
#
# The response will be in hex format (e.g., "0x13c377f"). Convert to decimal:
#   echo $((16#13c377f))  # Outputs: 20702367
#
# Update FORK_BLOCK_NUMBER above with the decimal value for recent testnet state.

# ===== Connector Configuration =====

# Connector logging level
# Set to 'debug' for verbose connector logging during development
# Options: debug, info, warn, error
LOG_LEVEL=info

# Node environment mode
# Development mode enables hot-reload and additional debugging features
NODE_ENV=development

# Dashboard telemetry enabled flag
# Set to 'true' to enable dashboard telemetry (or use make dev-up-dashboard)
DASHBOARD_ENABLED=false

# ===== Development Workflow Configuration =====

# Hot-reload enabled flag
# Hot-reload automatically restarts connectors when code changes detected
ENABLE_HOT_RELOAD=true

# Auto-restart connectors on crash during development
AUTO_RESTART=true

# ===== Blockchain Configuration (Development) =====

# Environment selection (development, staging, production)
# Development uses local blockchain nodes (Anvil, rippled standalone)
ENVIRONMENT=development

# --- Base L2 Development Configuration ---

# Enable Base L2 blockchain integration
BASE_ENABLED=true

# Base RPC URL (defaults to local Anvil at http://anvil:8545)
# Local Anvil fork of Base Sepolia (Story 7.1)
BASE_RPC_URL=http://anvil:8545

# Base Chain ID (84532 = Base Sepolia, forked by Anvil)
BASE_CHAIN_ID=84532

# Base Private Key (Anvil Account #0 - DO NOT use in production)
# This is a publicly known development key from Foundry/Anvil
BASE_PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

# Base Payment Channel Registry Contract Address (optional)
# Deployed contract address for Epic 8 payment channels
BASE_REGISTRY_ADDRESS=

# --- XRPL Development Configuration ---

# Enable XRP Ledger blockchain integration
XRPL_ENABLED=true

# XRPL RPC URL (defaults to local rippled at http://rippled:5005)
# Local rippled standalone mode (Story 7.2)
XRPL_RPC_URL=http://rippled:5005

# XRPL Network (standalone for local development)
# Options: standalone, testnet, mainnet
XRPL_NETWORK=standalone

# XRPL Private Key (optional, generated from rippled standalone)
# Format: XRPL seed format (starts with 's')
XRPL_PRIVATE_KEY=

# --- Aptos Development Configuration ---

# Enable Aptos blockchain integration
APTOS_ENABLED=true

# Aptos Docker image tag (nightly, devnet, testnet)
# nightly is recommended for latest features
APTOS_IMAGE_TAG=nightly

# Enable Indexer API (requires more resources: ~4GB RAM, ~90s startup)
# Only enable if you need GraphQL queries for historical data
APTOS_WITH_INDEXER=false

# Port Configuration (override if ports 8080/8081 conflict with other services)
# Common conflict: port 8080 used by other development servers
APTOS_NODE_PORT=8080
APTOS_FAUCET_PORT=8081

# Aptos RPC URLs (local testnet)
# For host machine access (scripts, tests from host):
APTOS_NODE_URL=http://localhost:8080/v1
APTOS_FAUCET_URL=http://localhost:8081

# For Docker container access (connectors):
# APTOS_NODE_URL=http://aptos-local:8080/v1
# APTOS_FAUCET_URL=http://aptos-local:8081

# Aptos Module Address (set after deploying payment_channel module)
# Deploy with: ./scripts/aptos-deploy-module.sh
APTOS_MODULE_ADDRESS=

# ===== Operational Timeouts =====

# BTP send timeout in ms (default: 10000, increase for multi-hop)
BTP_SEND_TIMEOUT_MS=10000

# BTP packet timeout for agent-runtime middleware (default: 10000)
CONNECTOR_BTP_PACKET_TIMEOUT_MS=10000

# TigerBeetle operation timeout in ms (default: 15000)
TIGERBEETLE_OPERATION_TIMEOUT=15000

# Settlement monitor polling interval in ms (default: 30000)
SETTLEMENT_POLLING_INTERVAL=30000

# Channel deposit multiplier (default: 1 = 1 token per channel)
INITIAL_DEPOSIT_MULTIPLIER=1

# --- Local Blockchain Setup Instructions ---
# Start local blockchain nodes with: make dev-up
# See docs/guides/local-blockchain-development.md for setup instructions
# See docs/guides/local-vs-production-config.md for environment switching
